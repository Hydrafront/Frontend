var $r=Object.defineProperty;var ht=t=>{throw TypeError(t)};var vr=(t,e,r)=>e in t?$r(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var d=(t,e,r)=>vr(t,typeof e!="symbol"?e+"":e,r),lt=(t,e,r)=>e.has(t)||ht("Cannot "+r);var R=(t,e,r)=>(lt(t,e,"read from private field"),r?r.call(t):e.get(t)),te=(t,e,r)=>e.has(t)?ht("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,r),re=(t,e,r,n)=>(lt(t,e,"write to private field"),n?n.call(t,r):e.set(t,r),r);function xr(t=0){return new Uint8Array(t)}const Sr=Math.pow(2,7),Er=Math.pow(2,14),Cr=Math.pow(2,21),et=Math.pow(2,28),tt=Math.pow(2,35),rt=Math.pow(2,42),nt=Math.pow(2,49),p=128,O=127;function q(t){if(t<Sr)return 1;if(t<Er)return 2;if(t<Cr)return 3;if(t<et)return 4;if(t<tt)return 5;if(t<rt)return 6;if(t<nt)return 7;if(Number.MAX_SAFE_INTEGER!=null&&t>Number.MAX_SAFE_INTEGER)throw new RangeError("Could not encode varint");return 8}function Ar(t,e,r=0){switch(q(t)){case 8:e[r++]=t&255|p,t/=128;case 7:e[r++]=t&255|p,t/=128;case 6:e[r++]=t&255|p,t/=128;case 5:e[r++]=t&255|p,t/=128;case 4:e[r++]=t&255|p,t>>>=7;case 3:e[r++]=t&255|p,t>>>=7;case 2:e[r++]=t&255|p,t>>>=7;case 1:{e[r++]=t&255,t>>>=7;break}default:throw new Error("unreachable")}return e}function Ur(t,e,r=0){switch(q(t)){case 8:e.set(r++,t&255|p),t/=128;case 7:e.set(r++,t&255|p),t/=128;case 6:e.set(r++,t&255|p),t/=128;case 5:e.set(r++,t&255|p),t/=128;case 4:e.set(r++,t&255|p),t>>>=7;case 3:e.set(r++,t&255|p),t>>>=7;case 2:e.set(r++,t&255|p),t>>>=7;case 1:{e.set(r++,t&255),t>>>=7;break}default:throw new Error("unreachable")}return e}function Pr(t,e){let r=t[e],n=0;if(n+=r&O,r<p||(r=t[e+1],n+=(r&O)<<7,r<p)||(r=t[e+2],n+=(r&O)<<14,r<p)||(r=t[e+3],n+=(r&O)<<21,r<p)||(r=t[e+4],n+=(r&O)*et,r<p)||(r=t[e+5],n+=(r&O)*tt,r<p)||(r=t[e+6],n+=(r&O)*rt,r<p)||(r=t[e+7],n+=(r&O)*nt,r<p))return n;throw new RangeError("Could not decode varint")}function zr(t,e){let r=t.get(e),n=0;if(n+=r&O,r<p||(r=t.get(e+1),n+=(r&O)<<7,r<p)||(r=t.get(e+2),n+=(r&O)<<14,r<p)||(r=t.get(e+3),n+=(r&O)<<21,r<p)||(r=t.get(e+4),n+=(r&O)*et,r<p)||(r=t.get(e+5),n+=(r&O)*tt,r<p)||(r=t.get(e+6),n+=(r&O)*rt,r<p)||(r=t.get(e+7),n+=(r&O)*nt,r<p))return n;throw new RangeError("Could not decode varint")}function Ee(t,e,r=0){return e==null&&(e=xr(q(t))),e instanceof Uint8Array?Ar(t,e,r):Ur(t,e,r)}function de(t,e=0){return t instanceof Uint8Array?Pr(t,e):zr(t,e)}function Lt(t=0){return new Uint8Array(t)}function J(t,e){e==null&&(e=t.reduce((s,o)=>s+o.length,0));const r=Lt(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function Mr(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function st(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function Tr(t){return new TextEncoder().encode(t)}function Or(t){return new TextDecoder().decode(t)}function Ir(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=t.length,l=t.charAt(0),g=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function U(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";for(var b=0,I=0,y=0,v=u.length;y!==v&&u[y]===0;)y++,b++;for(var x=(v-y)*f+1>>>0,w=new Uint8Array(x);y!==v;){for(var S=u[y],P=0,m=x-1;(S!==0||P<I)&&m!==-1;m--,P++)S+=256*w[m]>>>0,w[m]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");I=P,y++}for(var A=x-I;A!==x&&w[A]===0;)A++;for(var j=l.repeat(b);A<x;++A)j+=t.charAt(w[A]);return j}function N(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;var b=0;if(u[b]!==" "){for(var I=0,y=0;u[b]===l;)I++,b++;for(var v=(u.length-b)*g+1>>>0,x=new Uint8Array(v);u[b];){var w=r[u.charCodeAt(b)];if(w===255)return;for(var S=0,P=v-1;(w!==0||S<y)&&P!==-1;P--,S++)w+=a*x[P]>>>0,x[P]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=S,b++}if(u[b]!==" "){for(var m=v-y;m!==v&&x[m]===0;)m++;for(var A=new Uint8Array(I+(v-m)),j=I;m!==v;)A[j++]=x[m++];return A}}}function D(u){var b=N(u);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:U,decodeUnsafe:N,decode:D}}var Dr=Ir,Nr=Dr;let _r=class{constructor(e,r,n){d(this,"name");d(this,"prefix");d(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}},Fr=class{constructor(e,r,n){d(this,"name");d(this,"prefix");d(this,"baseDecode");d(this,"prefixCodePoint");this.name=e,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return Bt(this,e)}},Lr=class{constructor(e){d(this,"decoders");this.decoders=e}or(e){return Bt(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}};function Bt(t,e){return new Lr({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}let Br=class{constructor(e,r,n,s){d(this,"name");d(this,"prefix");d(this,"baseEncode");d(this,"baseDecode");d(this,"encoder");d(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new _r(e,r,n),this.decoder=new Fr(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}};function Ce({name:t,prefix:e,encode:r,decode:n}){return new Br(t,e,r,n)}function he({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=Nr(r,t);return Ce({prefix:e,name:t,encode:n,decode:o=>st(s(o))})}function jr(t,e,r,n){const s={};for(let f=0;f<e.length;++f)s[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;const i=new Uint8Array(o*r/8|0);let a=0,l=0,g=0;for(let f=0;f<o;++f){const U=s[t[f]];if(U===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|U,a+=r,a>=8&&(a-=8,i[g++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return i}function Rr(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],i+=8;i>r;)i-=r,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<r-i]),n)for(;o.length*r&7;)o+="=";return o}function z({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return Ce({prefix:e,name:t,encode(s){return Rr(s,n,r)},decode(s){return jr(s,n,r,t)}})}const Vr=he({prefix:"9",name:"base10",alphabet:"0123456789"}),kr=Object.freeze(Object.defineProperty({__proto__:null,base10:Vr},Symbol.toStringTag,{value:"Module"})),qr=z({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Wr=z({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Gr=Object.freeze(Object.defineProperty({__proto__:null,base16:qr,base16upper:Wr},Symbol.toStringTag,{value:"Module"})),Jr=z({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),Qr=Object.freeze(Object.defineProperty({__proto__:null,base2:Jr},Symbol.toStringTag,{value:"Module"})),jt=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Xr=jt.reduce((t,e,r)=>(t[r]=e,t),[]),Kr=jt.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function Zr(t){return t.reduce((e,r)=>(e+=Xr[r],e),"")}function Hr(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=Kr[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const Yr=Ce({prefix:"ðŸš€",name:"base256emoji",encode:Zr,decode:Hr}),en=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Yr},Symbol.toStringTag,{value:"Module"})),G=z({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),tn=z({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),rn=z({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),nn=z({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),sn=z({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),on=z({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),an=z({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),cn=z({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),un=z({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),dn=Object.freeze(Object.defineProperty({__proto__:null,base32:G,base32hex:sn,base32hexpad:an,base32hexpadupper:cn,base32hexupper:on,base32pad:rn,base32padupper:nn,base32upper:tn,base32z:un},Symbol.toStringTag,{value:"Module"})),pe=he({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),hn=he({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),ln=Object.freeze(Object.defineProperty({__proto__:null,base36:pe,base36upper:hn},Symbol.toStringTag,{value:"Module"})),F=he({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),fn=he({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),pn=Object.freeze(Object.defineProperty({__proto__:null,base58btc:F,base58flickr:fn},Symbol.toStringTag,{value:"Module"})),bn=z({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),wn=z({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),gn=z({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),yn=z({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),mn=Object.freeze(Object.defineProperty({__proto__:null,base64:bn,base64pad:wn,base64url:gn,base64urlpad:yn},Symbol.toStringTag,{value:"Module"})),$n=z({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),vn=Object.freeze(Object.defineProperty({__proto__:null,base8:$n},Symbol.toStringTag,{value:"Module"})),xn=Ce({prefix:"\0",name:"identity",encode:t=>Or(t),decode:t=>Tr(t)}),Sn=Object.freeze(Object.defineProperty({__proto__:null,identity:xn},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;var En=Rt,ft=128,Cn=-128,An=Math.pow(2,31);function Rt(t,e,r){e=e||[],r=r||0;for(var n=r;t>=An;)e[r++]=t&255|ft,t/=128;for(;t&Cn;)e[r++]=t&255|ft,t>>>=7;return e[r]=t|0,Rt.bytes=r-n+1,e}var Un=Be,Pn=128,pt=127;function Be(t,n){var r=0,n=n||0,s=0,o=n,i,a=t.length;do{if(o>=a)throw Be.bytes=0,new RangeError("Could not decode varint");i=t[o++],r+=s<28?(i&pt)<<s:(i&pt)*Math.pow(2,s),s+=7}while(i>=Pn);return Be.bytes=o-n,r}var zn=Math.pow(2,7),Mn=Math.pow(2,14),Tn=Math.pow(2,21),On=Math.pow(2,28),In=Math.pow(2,35),Dn=Math.pow(2,42),Nn=Math.pow(2,49),_n=Math.pow(2,56),Fn=Math.pow(2,63),Ln=function(t){return t<zn?1:t<Mn?2:t<Tn?3:t<On?4:t<In?5:t<Dn?6:t<Nn?7:t<_n?8:t<Fn?9:10},Bn={encode:En,decode:Un,encodingLength:Ln},we=Bn;function je(t,e=0){return[we.decode(t,e),we.decode.bytes]}function ge(t,e,r=0){return we.encode(t,e,r),e}function ye(t){return we.encodingLength(t)}function jn(t,e){const r=e.byteLength,n=ye(t),s=n+ye(r),o=new Uint8Array(s+r);return ge(t,o,0),ge(r,o,n),o.set(e,s),new ot(t,r,e,o)}function Vt(t){const e=st(t),[r,n]=je(e),[s,o]=je(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new ot(r,s,i,e)}function Rn(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Mr(t.bytes,r.bytes)}}let ot=class{constructor(e,r,n,s){d(this,"code");d(this,"size");d(this,"digest");d(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=s}};function bt(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return kn(r,Re(t),e??F.encoder);default:return qn(r,Re(t),e??G.encoder)}}const wt=new WeakMap;function Re(t){const e=wt.get(t);if(e==null){const r=new Map;return wt.set(t,r),r}return e}var Nt;let kt=class T{constructor(e,r,n,s){d(this,"code");d(this,"version");d(this,"multihash");d(this,"bytes");d(this,"/");d(this,Nt,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==ne)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Wn)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return T.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=jn(e,r);return T.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return T.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Rn(e.multihash,n.multihash)}toString(e){return bt(this,e)}toJSON(){return{"/":bt(this)}}link(){return this}[(Nt=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof T)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new T(n,s,o,i??gt(n,s,o.bytes))}else if(r[Gn]===!0){const{version:n,multihash:s,code:o}=r,i=Vt(s);return T.create(n,o,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==ne)throw new Error(`Version 0 CID must use dag-pb (code: ${ne}) block encoding`);return new T(e,r,n,n.bytes)}case 1:{const s=gt(e,r,n.bytes);return new T(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return T.create(0,ne,e)}static createV1(e,r){return T.create(1,e,r)}static decode(e){const[r,n]=T.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=T.inspectBytes(e),n=r.size-r.multihashSize,s=st(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new ot(r.multihashCode,r.digestSize,o,s);return[r.version===0?T.createV0(i):T.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[U,N]=je(e.subarray(r));return r+=N,U};let s=n(),o=ne;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),l=n(),g=r+l,f=g-i;return{version:s,codec:o,multihashCode:a,digestSize:l,multihashSize:f,size:g}}static parse(e,r){const[n,s]=Vn(e,r),o=T.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Re(o).set(n,e),o}};function Vn(t,e){switch(t[0]){case"Q":{const r=e??F;return[F.prefix,r.decode(`${F.prefix}${t}`)]}case F.prefix:{const r=e??F;return[F.prefix,r.decode(t)]}case G.prefix:{const r=e??G;return[G.prefix,r.decode(t)]}case pe.prefix:{const r=e??pe;return[pe.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function kn(t,e,r){const{prefix:n}=r;if(n!==F.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const o=r.encode(t).slice(1);return e.set(n,o),o}else return s}function qn(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const o=r.encode(t);return e.set(n,o),o}else return s}const ne=112,Wn=18;function gt(t,e,r){const n=ye(t),s=n+ye(e),o=new Uint8Array(s+r.byteLength);return ge(t,o,0),ge(e,o,n),o.set(r,s),o}const Gn=Symbol.for("@ipld/js-cid/CID"),Ve={...Sn,...Qr,...vn,...kr,...Gr,...dn,...ln,...pn,...mn,...en};function qt(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const yt=qt("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),De=qt("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=Lt(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),Wt={utf8:yt,"utf-8":yt,hex:Ve.base16,latin1:De,ascii:De,binary:De,...Ve};function L(t,e="utf8"){const r=Wt[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}class Jn{constructor(){d(this,"index",0);d(this,"input","")}new(e){return this.index=0,this.input=e,this}readAtomically(e){const r=this.index,n=e();return n===void 0&&(this.index=r),n}parseWith(e){const r=e();if(this.index===this.input.length)return r}peekChar(){if(!(this.index>=this.input.length))return this.input[this.index]}readChar(){if(!(this.index>=this.input.length))return this.input[this.index++]}readGivenChar(e){return this.readAtomically(()=>{const r=this.readChar();if(r===e)return r})}readSeparator(e,r,n){return this.readAtomically(()=>{if(!(r>0&&this.readGivenChar(e)===void 0))return n()})}readNumber(e,r,n,s){return this.readAtomically(()=>{let o=0,i=0;const a=this.peekChar();if(a===void 0)return;const l=a==="0",g=2**(8*s)-1;for(;;){const f=this.readAtomically(()=>{const U=this.readChar();if(U===void 0)return;const N=Number.parseInt(U,e);if(!Number.isNaN(N))return N});if(f===void 0)break;if(o*=e,o+=f,o>g||(i+=1,r!==void 0&&i>r))return}if(i!==0)return!n&&l&&i>1?void 0:o})}readIPv4Addr(){return this.readAtomically(()=>{const e=new Uint8Array(4);for(let r=0;r<e.length;r++){const n=this.readSeparator(".",r,()=>this.readNumber(10,3,!1,1));if(n===void 0)return;e[r]=n}return e})}readIPv6Addr(){const e=r=>{for(let n=0;n<r.length/2;n++){const s=n*2;if(n<r.length-3){const i=this.readSeparator(":",n,()=>this.readIPv4Addr());if(i!==void 0)return r[s]=i[0],r[s+1]=i[1],r[s+2]=i[2],r[s+3]=i[3],[s+4,!0]}const o=this.readSeparator(":",n,()=>this.readNumber(16,4,!0,2));if(o===void 0)return[s,!1];r[s]=o>>8,r[s+1]=o&255}return[r.length,!1]};return this.readAtomically(()=>{const r=new Uint8Array(16),[n,s]=e(r);if(n===16)return r;if(s||this.readGivenChar(":")===void 0||this.readGivenChar(":")===void 0)return;const o=new Uint8Array(14),i=16-(n+2),[a]=e(o.subarray(0,i));return r.set(o.subarray(0,a),16-a),r})}readIPAddr(){return this.readIPv4Addr()??this.readIPv6Addr()}}const Gt=45,Qn=15,Y=new Jn;function Xn(t){if(!(t.length>Qn))return Y.new(t).parseWith(()=>Y.readIPv4Addr())}function Kn(t){if(t.includes("%")&&(t=t.split("%")[0]),!(t.length>Gt))return Y.new(t).parseWith(()=>Y.readIPv6Addr())}function Zn(t,e=!1){if(t.includes("%")&&(t=t.split("%")[0]),t.length>Gt)return;const r=Y.new(t).parseWith(()=>Y.readIPAddr());if(r)return e&&r.length===4?Uint8Array.from([0,0,0,0,0,0,0,0,0,0,255,255,r[0],r[1],r[2],r[3]]):r}function ke(t,e="utf8"){const r=Wt[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.decoder.decode(`${r.prefix}${t}`)}function Hn(t){return!!Xn(t)}function Yn(t){return!!Kn(t)}function Jt(t){return!!Zn(t)}const mt=Hn,es=Yn,Qt=function(t){let e=0;if(t=t.toString().trim(),mt(t)){const r=new Uint8Array(e+4);return t.split(/\./g).forEach(n=>{r[e++]=parseInt(n,10)&255}),r}if(es(t)){const r=t.split(":",8);let n;for(n=0;n<r.length;n++){const o=mt(r[n]);let i;o&&(i=Qt(r[n]),r[n]=L(i.slice(0,2),"base16")),i!=null&&++n<8&&r.splice(n,0,L(i.slice(2,4),"base16"))}if(r[0]==="")for(;r.length<8;)r.unshift("0");else if(r[r.length-1]==="")for(;r.length<8;)r.push("0");else if(r.length<8){for(n=0;n<r.length&&r[n]!=="";n++);const o=[n,1];for(n=9-r.length;n>0;n--)o.push("0");r.splice.apply(r,o)}const s=new Uint8Array(e+16);for(n=0;n<r.length;n++){const o=parseInt(r[n],16);s[e++]=o>>8&255,s[e++]=o&255}return s}throw new Error("invalid ip address")},ts=function(t,e=0,r){e=~~e,r=r??t.length-e;const n=new DataView(t.buffer);if(r===4){const s=[];for(let o=0;o<r;o++)s.push(t[e+o]);return s.join(".")}if(r===16){const s=[];for(let o=0;o<r;o+=2)s.push(n.getUint16(e+o).toString(16));return s.join(":").replace(/(^|:)0(:0)*:0(:|$)/,"$1::$3").replace(/:{3,4}/,"::")}return""},_=-1,ie={},qe={},rs=[[4,32,"ip4"],[6,16,"tcp"],[33,16,"dccp"],[41,128,"ip6"],[42,_,"ip6zone"],[43,8,"ipcidr"],[53,_,"dns",!0],[54,_,"dns4",!0],[55,_,"dns6",!0],[56,_,"dnsaddr",!0],[132,16,"sctp"],[273,16,"udp"],[275,0,"p2p-webrtc-star"],[276,0,"p2p-webrtc-direct"],[277,0,"p2p-stardust"],[280,0,"webrtc-direct"],[281,0,"webrtc"],[290,0,"p2p-circuit"],[301,0,"udt"],[302,0,"utp"],[400,_,"unix",!1,!0],[421,_,"ipfs"],[421,_,"p2p"],[443,0,"https"],[444,96,"onion"],[445,296,"onion3"],[446,_,"garlic64"],[448,0,"tls"],[449,_,"sni"],[460,0,"quic"],[461,0,"quic-v1"],[465,0,"webtransport"],[466,_,"certhash"],[477,0,"ws"],[478,0,"wss"],[479,0,"p2p-websocket-star"],[480,0,"http"],[481,_,"http-path"],[777,_,"memory"]];rs.forEach(t=>{const e=ns(...t);qe[e.code]=e,ie[e.name]=e});function ns(t,e,r,n,s){return{code:t,size:e,name:r,resolvable:!!n,path:!!s}}function $(t){if(typeof t=="number"){if(qe[t]!=null)return qe[t];throw new Error(`no protocol with code: ${t}`)}else if(typeof t=="string"){if(ie[t]!=null)return ie[t];throw new Error(`no protocol with name: ${t}`)}throw new Error(`invalid protocol id type: ${typeof t}`)}$("ip4");$("ip6");$("ipcidr");function Xt(t,e){switch($(t).code){case 4:case 41:return os(e);case 42:return Fe(e);case 43:return L(e,"base10");case 6:case 273:case 33:case 132:return Kt(e).toString();case 53:case 54:case 55:case 56:case 400:case 449:case 777:return Fe(e);case 421:return us(e);case 444:return xt(e);case 445:return xt(e);case 466:return cs(e);case 481:return globalThis.encodeURIComponent(Fe(e));default:return L(e,"base16")}}function $t(t,e){switch($(t).code){case 4:return vt(e);case 41:return vt(e);case 42:return _e(e);case 43:return ke(e,"base10");case 6:case 273:case 33:case 132:return it(parseInt(e,10));case 53:case 54:case 55:case 56:case 400:case 449:case 777:return _e(e);case 421:return is(e);case 444:return ds(e);case 445:return hs(e);case 466:return as(e);case 481:return _e(globalThis.decodeURIComponent(e));default:return ke(e,"base16")}}const Ne=Object.values(Ve).map(t=>t.decoder),ss=function(){let t=Ne[0].or(Ne[1]);return Ne.slice(2).forEach(e=>t=t.or(e)),t}();function vt(t){if(!Jt(t))throw new Error("invalid ip address");return Qt(t)}function os(t){const e=ts(t,0,t.length);if(e==null)throw new Error("ipBuff is required");if(!Jt(e))throw new Error("invalid ip address");return e}function it(t){const e=new ArrayBuffer(2);return new DataView(e).setUint16(0,t),new Uint8Array(e)}function Kt(t){return new DataView(t.buffer).getUint16(t.byteOffset)}function _e(t){const e=ke(t),r=Uint8Array.from(Ee(e.length));return J([r,e],r.length+e.length)}function Fe(t){const e=de(t);if(t=t.slice(q(e)),t.length!==e)throw new Error("inconsistent lengths");return L(t)}function is(t){let e;t[0]==="Q"||t[0]==="1"?e=Vt(F.decode(`z${t}`)).bytes:e=kt.parse(t).multihash.bytes;const r=Uint8Array.from(Ee(e.length));return J([r,e],r.length+e.length)}function as(t){const e=ss.decode(t),r=Uint8Array.from(Ee(e.length));return J([r,e],r.length+e.length)}function cs(t){const e=de(t),r=t.slice(q(e));if(r.length!==e)throw new Error("inconsistent lengths");return"u"+L(r,"base64url")}function us(t){const e=de(t),r=t.slice(q(e));if(r.length!==e)throw new Error("inconsistent lengths");return L(r,"base58btc")}function ds(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==16)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion address.`);const r=G.decode("b"+e[0]),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=it(n);return J([r,s],r.length+s.length)}function hs(t){const e=t.split(":");if(e.length!==2)throw new Error(`failed to parse onion addr: ["'${e.join('", "')}'"]' does not contain a port number`);if(e[0].length!==56)throw new Error(`failed to parse onion addr: ${e[0]} not a Tor onion3 address.`);const r=G.decode(`b${e[0]}`),n=parseInt(e[1],10);if(n<1||n>65536)throw new Error("Port number is not in range(1, 65536)");const s=it(n);return J([r,s],r.length+s.length)}function xt(t){const e=t.slice(0,t.length-2),r=t.slice(t.length-2),n=L(e,"base32"),s=Kt(r);return`${n}:${s}`}function ls(t){t=We(t);const e=[],r=[];let n=null;const s=t.split("/").slice(1);if(s.length===1&&s[0]==="")return{bytes:new Uint8Array,string:"/",tuples:[],stringTuples:[],path:null};for(let o=0;o<s.length;o++){const i=s[o],a=$(i);if(a.size===0){e.push([a.code]),r.push([a.code]);continue}if(o++,o>=s.length)throw new at("invalid address: "+t);if(a.path===!0){n=We(s.slice(o).join("/")),e.push([a.code,$t(a.code,n)]),r.push([a.code,n]);break}const l=$t(a.code,s[o]);e.push([a.code,l]),r.push([a.code,Xt(a.code,l)])}return{string:Zt(r),bytes:Ht(e),tuples:e,stringTuples:r,path:n}}function St(t){const e=[],r=[];let n=null,s=0;for(;s<t.length;){const o=de(t,s),i=q(o),a=$(o),l=fs(a,t.slice(s+i));if(l===0){e.push([o]),r.push([o]),s+=i;continue}const g=t.slice(s+i,s+i+l);if(s+=l+i,s>t.length)throw new at("Invalid address Uint8Array: "+L(t,"base16"));e.push([o,g]);const f=Xt(o,g);if(r.push([o,f]),a.path===!0){n=f;break}}return{bytes:Uint8Array.from(t),string:Zt(r),tuples:e,stringTuples:r,path:n}}function Zt(t){const e=[];return t.map(r=>{const n=$(r[0]);return e.push(n.name),r.length>1&&r[1]!=null&&e.push(r[1]),null}),We(e.join("/"))}function Ht(t){return J(t.map(e=>{const r=$(e[0]);let n=Uint8Array.from(Ee(r.code));return e.length>1&&e[1]!=null&&(n=J([n,e[1]])),n}))}function fs(t,e){if(t.size>0)return t.size/8;if(t.size===0)return 0;{const r=de(e instanceof Uint8Array?e:Uint8Array.from(e));return r+q(r)}}function We(t){return"/"+t.trim().split("/").filter(e=>e).join("/")}class at extends Error{constructor(r){super(`Error parsing address: ${r}`);d(this,"name","ParseError")}}d(at,"name","ParseError");function ps(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}const bs=Symbol.for("nodejs.util.inspect.custom"),Yt=Symbol.for("@multiformats/js-multiaddr/multiaddr"),ws=[$("dns").code,$("dns4").code,$("dns6").code,$("dnsaddr").code];class gs extends Error{constructor(e="No available resolver"){super(e),this.name="NoAvailableResolverError"}}var _t,H,V,ce,ue;const K=class K{constructor(e){d(this,"bytes");te(this,H);te(this,V);te(this,ce);te(this,ue);d(this,_t,!0);e==null&&(e="");let r;if(e instanceof Uint8Array)r=St(e);else if(typeof e=="string"){if(e.length>0&&e.charAt(0)!=="/")throw new Error(`multiaddr "${e}" must start with a "/"`);r=ls(e)}else if(ms(e))r=St(e.bytes);else throw new Error("addr must be a string, Buffer, or another Multiaddr");this.bytes=r.bytes,re(this,H,r.string),re(this,V,r.tuples),re(this,ce,r.stringTuples),re(this,ue,r.path)}toString(){return R(this,H)}toJSON(){return this.toString()}toOptions(){let e,r,n,s,o="";const i=$("tcp"),a=$("udp"),l=$("ip4"),g=$("ip6"),f=$("dns6"),U=$("ip6zone");for(const[D,u]of this.stringTuples())D===U.code&&(o=`%${u??""}`),ws.includes(D)&&(r=i.name==="tcp"?"tcp":"udp",s=443,n=`${u??""}${o}`,e=D===f.code?6:4),(D===i.code||D===a.code)&&(r=$(D).name==="tcp"?"tcp":"udp",s=parseInt(u??"")),(D===l.code||D===g.code)&&(r=$(D).name==="tcp"?"tcp":"udp",n=`${u??""}${o}`,e=D===g.code?6:4);if(e==null||r==null||n==null||s==null)throw new Error('multiaddr must have a valid format: "/{ip4, ip6, dns4, dns6, dnsaddr}/{address}/{tcp, udp}/{port}".');return{family:e,host:n,transport:r,port:s}}protos(){return R(this,V).map(([e])=>Object.assign({},$(e)))}protoCodes(){return R(this,V).map(([e])=>e)}protoNames(){return R(this,V).map(([e])=>$(e).name)}tuples(){return R(this,V).map(([e,r])=>r==null?[e]:[e,r])}stringTuples(){return R(this,ce).map(([e,r])=>r==null?[e]:[e,r])}encapsulate(e){return e=new K(e),new K(this.toString()+e.toString())}decapsulate(e){const r=e.toString(),n=this.toString(),s=n.lastIndexOf(r);if(s<0)throw new Error(`Address ${this.toString()} does not contain subaddress: ${e.toString()}`);return new K(n.slice(0,s))}decapsulateCode(e){const r=this.tuples();for(let n=r.length-1;n>=0;n--)if(r[n][0]===e)return new K(Ht(r.slice(0,n)));return this}getPeerId(){try{let e=[];this.stringTuples().forEach(([n,s])=>{n===ie.p2p.code&&e.push([n,s]),n===ie["p2p-circuit"].code&&(e=[])});const r=e.pop();if((r==null?void 0:r[1])!=null){const n=r[1];return n[0]==="Q"||n[0]==="1"?L(F.decode(`z${n}`),"base58btc"):L(kt.parse(n).multihash.bytes,"base58btc")}return null}catch{return null}}getPath(){return R(this,ue)}equals(e){return ps(this.bytes,e.bytes)}async resolve(e){const r=this.protos().find(o=>o.resolvable);if(r==null)return[this];const n=ys.get(r.name);if(n==null)throw new gs(`no available resolver for ${r.name}`);return(await n(this,e)).map(o=>Ae(o))}nodeAddress(){const e=this.toOptions();if(e.transport!=="tcp"&&e.transport!=="udp")throw new Error(`multiaddr must have a valid format - no protocol with name: "${e.transport}". Must have a valid transport protocol: "{tcp, udp}"`);return{family:e.family,address:e.host,port:e.port}}isThinWaistAddress(e){const r=(e??this).protos();return!(r.length!==2||r[0].code!==4&&r[0].code!==41||r[1].code!==6&&r[1].code!==273)}[(_t=Yt,bs)](){return`Multiaddr(${R(this,H)})`}};H=new WeakMap,V=new WeakMap,ce=new WeakMap,ue=new WeakMap;let Ge=K;const ys=new Map;function ms(t){return!!(t!=null&&t[Yt])}function Ae(t){return new Ge(t)}const $s=c("dns4"),vs=c("dns6"),xs=c("dnsaddr"),Q=C(c("dns"),xs,$s,vs),Ue=C(c("ip4"),c("ip6")),ee=C(h(Ue,c("tcp")),h(Q,c("tcp"))),Pe=h(Ue,c("udp")),Ss=h(Pe,c("utp")),Es=h(Pe,c("quic")),Cs=h(Pe,c("quic-v1")),Je=C(h(ee,c("ws")),h(Q,c("ws"))),me=C(h(Je,c("p2p")),Je),Qe=C(h(ee,c("wss")),h(Q,c("wss")),h(ee,c("tls"),c("ws")),h(Q,c("tls"),c("ws"))),$e=C(h(Qe,c("p2p")),Qe),Xe=C(h(ee,c("http")),h(Ue,c("http")),h(Q,c("http"))),Ke=C(h(ee,c("https")),h(Ue,c("https")),h(Q,c("https"))),Et=h(Pe,c("webrtc-direct"),c("certhash")),er=C(h(Et,c("p2p")),Et),Ct=h(Cs,c("webtransport"),c("certhash"),c("certhash")),tr=C(h(Ct,c("p2p")),Ct),rr=C(h(me,c("p2p-webrtc-star"),c("p2p")),h($e,c("p2p-webrtc-star"),c("p2p")),h(me,c("p2p-webrtc-star")),h($e,c("p2p-webrtc-star")));C(h(me,c("p2p-websocket-star"),c("p2p")),h($e,c("p2p-websocket-star"),c("p2p")),h(me,c("p2p-websocket-star")),h($e,c("p2p-websocket-star")));const nr=C(h(Xe,c("p2p-webrtc-direct"),c("p2p")),h(Ke,c("p2p-webrtc-direct"),c("p2p")),h(Xe,c("p2p-webrtc-direct")),h(Ke,c("p2p-webrtc-direct"))),X=C(Je,Qe,Xe,Ke,rr,nr,ee,Ss,Es,Q,er,tr);C(h(X,c("p2p-stardust"),c("p2p")),h(X,c("p2p-stardust")));const k=C(h(X,c("p2p")),rr,nr,er,tr,c("p2p")),At=C(h(k,c("p2p-circuit"),k),h(k,c("p2p-circuit")),h(c("p2p-circuit"),k),h(X,c("p2p-circuit")),h(c("p2p-circuit"),X),c("p2p-circuit")),sr=()=>C(h(At,sr),At),W=sr(),As=C(h(W,k,W),h(k,W),h(W,k),W,k);C(h(W,c("webrtc"),c("p2p")),h(W,c("webrtc")),h(X,c("webrtc"),c("p2p")),h(X,c("webrtc")),c("webrtc"));function or(t){function e(r){let n;try{n=Ae(r)}catch{return!1}const s=t(n.protoNames());return s===null?!1:s===!0||s===!1?s:s.length===0}return e}function h(...t){function e(r){if(r.length<t.length)return null;let n=r;return t.some(s=>(n=typeof s=="function"?s().partialMatch(r):s.partialMatch(r),Array.isArray(n)&&(r=n),n===null)),n}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:or(e),partialMatch:e}}function C(...t){function e(n){let s=null;return t.some(o=>{const i=typeof o=="function"?o().partialMatch(n):o.partialMatch(n);return i!=null?(s=i,!0):!1}),s}return{toString:function(){return"{ "+t.join(" ")+" }"},input:t,matches:or(e),partialMatch:e}}function c(t){const e=t;function r(s){let o;try{o=Ae(s)}catch{return!1}const i=o.protoNames();return i.length===1&&i[0]===e}function n(s){return s.length===0?null:s[0]===e?s.slice(1):null}return{toString:function(){return e},matches:r,partialMatch:n}}const Us=typeof navigator<"u"&&navigator.product==="ReactNative";function Ps(){return Us?"http://localhost":self.location?self.location.protocol+"//"+self.location.host:""}const oe=self.URL,ir=Ps();let zs=class{constructor(e="",r=ir){this.super=new oe(e,r),this.path=this.pathname+this.search,this.auth=this.username&&this.password?this.username+":"+this.password:null,this.query=this.search&&this.search.startsWith("?")?this.search.slice(1):null}get hash(){return this.super.hash}get host(){return this.super.host}get hostname(){return this.super.hostname}get href(){return this.super.href}get origin(){return this.super.origin}get password(){return this.super.password}get pathname(){return this.super.pathname}get port(){return this.super.port}get protocol(){return this.super.protocol}get search(){return this.super.search}get searchParams(){return this.super.searchParams}get username(){return this.super.username}set hash(e){this.super.hash=e}set host(e){this.super.host=e}set hostname(e){this.super.hostname=e}set href(e){this.super.href=e}set password(e){this.super.password=e}set pathname(e){this.super.pathname=e}set port(e){this.super.port=e}set protocol(e){this.super.protocol=e}set search(e){this.super.search=e}set username(e){this.super.username=e}static createObjectURL(e){return oe.createObjectURL(e)}static revokeObjectURL(e){oe.revokeObjectURL(e)}toJSON(){return this.super.toJSON()}toString(){return this.super.toString()}format(){return this.toString()}};function Ms(t){if(typeof t=="string")return new oe(t).toString();if(!(t instanceof oe)){const e=t.username&&t.password?`${t.username}:${t.password}@`:"",r=t.auth?t.auth+"@":"",n=t.port?":"+t.port:"",s=t.protocol?t.protocol+"//":"",o=t.host||"",i=t.hostname||"",a=t.search||(t.query?"?"+t.query:""),l=t.hash||"",g=t.pathname||"",f=t.path||g+a;return`${s}${e||r}${o||i+n}${f}${l}`}}var ar={URLWithLegacySupport:zs,URLSearchParams:self.URLSearchParams,defaultBase:ir,format:Ms};const{URLWithLegacySupport:Ut,format:Ts}=ar;var Os=(t,e={},r={},n)=>{let s=e.protocol?e.protocol.replace(":",""):"http";s=(r[s]||n||s)+":";let o;try{o=new Ut(t)}catch{o={}}const i=Object.assign({},e,{protocol:s||o.protocol,host:e.host||o.host});return new Ut(t,Ts(i)).toString()};const{URLWithLegacySupport:Is,format:Ds,URLSearchParams:Ns,defaultBase:_s}=ar,Fs=Os;var Ls={URL:Is,URLSearchParams:Ns,format:Ds,relative:Fs,defaultBase:_s};function Bs(t,e){if(t===e)return!0;if(t.byteLength!==e.byteLength)return!1;for(let r=0;r<t.byteLength;r++)if(t[r]!==e[r])return!1;return!0}function ct(t){if(t instanceof Uint8Array&&t.constructor.name==="Uint8Array")return t;if(t instanceof ArrayBuffer)return new Uint8Array(t);if(ArrayBuffer.isView(t))return new Uint8Array(t.buffer,t.byteOffset,t.byteLength);throw new Error("Unknown type, must be binary type")}function js(t){return new TextEncoder().encode(t)}function Rs(t){return new TextDecoder().decode(t)}function Vs(t,e){if(t.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),n=0;n<r.length;n++)r[n]=255;for(var s=0;s<t.length;s++){var o=t.charAt(s),i=o.charCodeAt(0);if(r[i]!==255)throw new TypeError(o+" is ambiguous");r[i]=s}var a=t.length,l=t.charAt(0),g=Math.log(a)/Math.log(256),f=Math.log(256)/Math.log(a);function U(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";for(var b=0,I=0,y=0,v=u.length;y!==v&&u[y]===0;)y++,b++;for(var x=(v-y)*f+1>>>0,w=new Uint8Array(x);y!==v;){for(var S=u[y],P=0,m=x-1;(S!==0||P<I)&&m!==-1;m--,P++)S+=256*w[m]>>>0,w[m]=S%a>>>0,S=S/a>>>0;if(S!==0)throw new Error("Non-zero carry");I=P,y++}for(var A=x-I;A!==x&&w[A]===0;)A++;for(var j=l.repeat(b);A<x;++A)j+=t.charAt(w[A]);return j}function N(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;var b=0;if(u[b]!==" "){for(var I=0,y=0;u[b]===l;)I++,b++;for(var v=(u.length-b)*g+1>>>0,x=new Uint8Array(v);u[b];){var w=r[u.charCodeAt(b)];if(w===255)return;for(var S=0,P=v-1;(w!==0||S<y)&&P!==-1;P--,S++)w+=a*x[P]>>>0,x[P]=w%256>>>0,w=w/256>>>0;if(w!==0)throw new Error("Non-zero carry");y=S,b++}if(u[b]!==" "){for(var m=v-y;m!==v&&x[m]===0;)m++;for(var A=new Uint8Array(I+(v-m)),j=I;m!==v;)A[j++]=x[m++];return A}}}function D(u){var b=N(u);if(b)return b;throw new Error(`Non-${e} character`)}return{encode:U,decodeUnsafe:N,decode:D}}var ks=Vs,qs=ks;class Ws{constructor(e,r,n){d(this,"name");d(this,"prefix");d(this,"baseEncode");this.name=e,this.prefix=r,this.baseEncode=n}encode(e){if(e instanceof Uint8Array)return`${this.prefix}${this.baseEncode(e)}`;throw Error("Unknown type, must be binary type")}}class Gs{constructor(e,r,n){d(this,"name");d(this,"prefix");d(this,"baseDecode");d(this,"prefixCodePoint");this.name=e,this.prefix=r;const s=r.codePointAt(0);if(s===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=s,this.baseDecode=n}decode(e){if(typeof e=="string"){if(e.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(e)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(e.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(e){return cr(this,e)}}class Js{constructor(e){d(this,"decoders");this.decoders=e}or(e){return cr(this,e)}decode(e){const r=e[0],n=this.decoders[r];if(n!=null)return n.decode(e);throw RangeError(`Unable to decode multibase string ${JSON.stringify(e)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}function cr(t,e){return new Js({...t.decoders??{[t.prefix]:t},...e.decoders??{[e.prefix]:e}})}class Qs{constructor(e,r,n,s){d(this,"name");d(this,"prefix");d(this,"baseEncode");d(this,"baseDecode");d(this,"encoder");d(this,"decoder");this.name=e,this.prefix=r,this.baseEncode=n,this.baseDecode=s,this.encoder=new Ws(e,r,n),this.decoder=new Gs(e,r,s)}encode(e){return this.encoder.encode(e)}decode(e){return this.decoder.decode(e)}}function ze({name:t,prefix:e,encode:r,decode:n}){return new Qs(t,e,r,n)}function le({name:t,prefix:e,alphabet:r}){const{encode:n,decode:s}=qs(r,t);return ze({prefix:e,name:t,encode:n,decode:o=>ct(s(o))})}function Xs(t,e,r,n){const s={};for(let f=0;f<e.length;++f)s[e[f]]=f;let o=t.length;for(;t[o-1]==="=";)--o;const i=new Uint8Array(o*r/8|0);let a=0,l=0,g=0;for(let f=0;f<o;++f){const U=s[t[f]];if(U===void 0)throw new SyntaxError(`Non-${n} character`);l=l<<r|U,a+=r,a>=8&&(a-=8,i[g++]=255&l>>a)}if(a>=r||255&l<<8-a)throw new SyntaxError("Unexpected end of data");return i}function Ks(t,e,r){const n=e[e.length-1]==="=",s=(1<<r)-1;let o="",i=0,a=0;for(let l=0;l<t.length;++l)for(a=a<<8|t[l],i+=8;i>r;)i-=r,o+=e[s&a>>i];if(i!==0&&(o+=e[s&a<<r-i]),n)for(;o.length*r&7;)o+="=";return o}function M({name:t,prefix:e,bitsPerChar:r,alphabet:n}){return ze({prefix:e,name:t,encode(s){return Ks(s,n,r)},decode(s){return Xs(s,n,r,t)}})}const Z=M({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Zs=M({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),Hs=M({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Ys=M({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),eo=M({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),to=M({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ro=M({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),no=M({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),so=M({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5}),oo=Object.freeze(Object.defineProperty({__proto__:null,base32:Z,base32hex:eo,base32hexpad:ro,base32hexpadupper:no,base32hexupper:to,base32pad:Hs,base32padupper:Ys,base32upper:Zs,base32z:so},Symbol.toStringTag,{value:"Module"})),B=le({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),io=le({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"}),ao=Object.freeze(Object.defineProperty({__proto__:null,base58btc:B,base58flickr:io},Symbol.toStringTag,{value:"Module"})),be=le({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),co=le({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"}),uo=Object.freeze(Object.defineProperty({__proto__:null,base36:be,base36upper:co},Symbol.toStringTag,{value:"Module"}));var ho=ur,Pt=128,lo=-128,fo=Math.pow(2,31);function ur(t,e,r){e=e||[],r=r||0;for(var n=r;t>=fo;)e[r++]=t&255|Pt,t/=128;for(;t&lo;)e[r++]=t&255|Pt,t>>>=7;return e[r]=t|0,ur.bytes=r-n+1,e}var po=Ze,bo=128,zt=127;function Ze(t,n){var r=0,n=n||0,s=0,o=n,i,a=t.length;do{if(o>=a)throw Ze.bytes=0,new RangeError("Could not decode varint");i=t[o++],r+=s<28?(i&zt)<<s:(i&zt)*Math.pow(2,s),s+=7}while(i>=bo);return Ze.bytes=o-n,r}var wo=Math.pow(2,7),go=Math.pow(2,14),yo=Math.pow(2,21),mo=Math.pow(2,28),$o=Math.pow(2,35),vo=Math.pow(2,42),xo=Math.pow(2,49),So=Math.pow(2,56),Eo=Math.pow(2,63),Co=function(t){return t<wo?1:t<go?2:t<yo?3:t<mo?4:t<$o?5:t<vo?6:t<xo?7:t<So?8:t<Eo?9:10},Ao={encode:ho,decode:po,encodingLength:Co},ve=Ao;function He(t,e=0){return[ve.decode(t,e),ve.decode.bytes]}function xe(t,e,r=0){return ve.encode(t,e,r),e}function Se(t){return ve.encodingLength(t)}function Uo(t,e){const r=e.byteLength,n=Se(t),s=n+Se(r),o=new Uint8Array(s+r);return xe(t,o,0),xe(r,o,n),o.set(e,s),new ut(t,r,e,o)}function dr(t){const e=ct(t),[r,n]=He(e),[s,o]=He(e.subarray(n)),i=e.subarray(n+o);if(i.byteLength!==s)throw new Error("Incorrect length");return new ut(r,s,i,e)}function Po(t,e){if(t===e)return!0;{const r=e;return t.code===r.code&&t.size===r.size&&r.bytes instanceof Uint8Array&&Bs(t.bytes,r.bytes)}}class ut{constructor(e,r,n,s){d(this,"code");d(this,"size");d(this,"digest");d(this,"bytes");this.code=e,this.size=r,this.digest=n,this.bytes=s}}function Mt(t,e){const{bytes:r,version:n}=t;switch(n){case 0:return Mo(r,Ye(t),e??B.encoder);default:return To(r,Ye(t),e??Z.encoder)}}const Tt=new WeakMap;function Ye(t){const e=Tt.get(t);if(e==null){const r=new Map;return Tt.set(t,r),r}return e}var Ft;class E{constructor(e,r,n,s){d(this,"code");d(this,"version");d(this,"multihash");d(this,"bytes");d(this,"/");d(this,Ft,"CID");this.code=r,this.version=e,this.multihash=n,this.bytes=s,this["/"]=s}get asCID(){return this}get byteOffset(){return this.bytes.byteOffset}get byteLength(){return this.bytes.byteLength}toV0(){switch(this.version){case 0:return this;case 1:{const{code:e,multihash:r}=this;if(e!==se)throw new Error("Cannot convert a non dag-pb CID to CIDv0");if(r.code!==Oo)throw new Error("Cannot convert non sha2-256 multihash CID to CIDv0");return E.createV0(r)}default:throw Error(`Can not convert CID version ${this.version} to version 0. This is a bug please report`)}}toV1(){switch(this.version){case 0:{const{code:e,digest:r}=this.multihash,n=Uo(e,r);return E.createV1(this.code,n)}case 1:return this;default:throw Error(`Can not convert CID version ${this.version} to version 1. This is a bug please report`)}}equals(e){return E.equals(this,e)}static equals(e,r){const n=r;return n!=null&&e.code===n.code&&e.version===n.version&&Po(e.multihash,n.multihash)}toString(e){return Mt(this,e)}toJSON(){return{"/":Mt(this)}}link(){return this}[(Ft=Symbol.toStringTag,Symbol.for("nodejs.util.inspect.custom"))](){return`CID(${this.toString()})`}static asCID(e){if(e==null)return null;const r=e;if(r instanceof E)return r;if(r["/"]!=null&&r["/"]===r.bytes||r.asCID===r){const{version:n,code:s,multihash:o,bytes:i}=r;return new E(n,s,o,i??Ot(n,s,o.bytes))}else if(r[Io]===!0){const{version:n,multihash:s,code:o}=r,i=dr(s);return E.create(n,o,i)}else return null}static create(e,r,n){if(typeof r!="number")throw new Error("String codecs are no longer supported");if(!(n.bytes instanceof Uint8Array))throw new Error("Invalid digest");switch(e){case 0:{if(r!==se)throw new Error(`Version 0 CID must use dag-pb (code: ${se}) block encoding`);return new E(e,r,n,n.bytes)}case 1:{const s=Ot(e,r,n.bytes);return new E(e,r,n,s)}default:throw new Error("Invalid version")}}static createV0(e){return E.create(0,se,e)}static createV1(e,r){return E.create(1,e,r)}static decode(e){const[r,n]=E.decodeFirst(e);if(n.length!==0)throw new Error("Incorrect length");return r}static decodeFirst(e){const r=E.inspectBytes(e),n=r.size-r.multihashSize,s=ct(e.subarray(n,n+r.multihashSize));if(s.byteLength!==r.multihashSize)throw new Error("Incorrect length");const o=s.subarray(r.multihashSize-r.digestSize),i=new ut(r.multihashCode,r.digestSize,o,s);return[r.version===0?E.createV0(i):E.createV1(r.codec,i),e.subarray(r.size)]}static inspectBytes(e){let r=0;const n=()=>{const[U,N]=He(e.subarray(r));return r+=N,U};let s=n(),o=se;if(s===18?(s=0,r=0):o=n(),s!==0&&s!==1)throw new RangeError(`Invalid CID version ${s}`);const i=r,a=n(),l=n(),g=r+l,f=g-i;return{version:s,codec:o,multihashCode:a,digestSize:l,multihashSize:f,size:g}}static parse(e,r){const[n,s]=zo(e,r),o=E.decode(s);if(o.version===0&&e[0]!=="Q")throw Error("Version 0 CID string must not include multibase prefix");return Ye(o).set(n,e),o}}function zo(t,e){switch(t[0]){case"Q":{const r=e??B;return[B.prefix,r.decode(`${B.prefix}${t}`)]}case B.prefix:{const r=e??B;return[B.prefix,r.decode(t)]}case Z.prefix:{const r=e??Z;return[Z.prefix,r.decode(t)]}case be.prefix:{const r=e??be;return[be.prefix,r.decode(t)]}default:{if(e==null)throw Error("To parse non base32, base36 or base58btc encoded CID multibase decoder must be provided");return[t[0],e.decode(t)]}}}function Mo(t,e,r){const{prefix:n}=r;if(n!==B.prefix)throw Error(`Cannot string encode V0 in ${r.name} encoding`);const s=e.get(n);if(s==null){const o=r.encode(t).slice(1);return e.set(n,o),o}else return s}function To(t,e,r){const{prefix:n}=r,s=e.get(n);if(s==null){const o=r.encode(t);return e.set(n,o),o}else return s}const se=112,Oo=18;function Ot(t,e,r){const n=Se(t),s=n+Se(e),o=new Uint8Array(s+r.byteLength);return xe(t,o,0),xe(e,o,n),o.set(r,s),o}const Io=Symbol.for("@ipld/js-cid/CID"),Do=le({prefix:"9",name:"base10",alphabet:"0123456789"}),No=Object.freeze(Object.defineProperty({__proto__:null,base10:Do},Symbol.toStringTag,{value:"Module"})),_o=M({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),Fo=M({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4}),Lo=Object.freeze(Object.defineProperty({__proto__:null,base16:_o,base16upper:Fo},Symbol.toStringTag,{value:"Module"})),Bo=M({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1}),jo=Object.freeze(Object.defineProperty({__proto__:null,base2:Bo},Symbol.toStringTag,{value:"Module"})),hr=Array.from("ðŸš€ðŸªâ˜„ðŸ›°ðŸŒŒðŸŒ‘ðŸŒ’ðŸŒ“ðŸŒ”ðŸŒ•ðŸŒ–ðŸŒ—ðŸŒ˜ðŸŒðŸŒðŸŒŽðŸ‰â˜€ðŸ’»ðŸ–¥ðŸ’¾ðŸ’¿ðŸ˜‚â¤ðŸ˜ðŸ¤£ðŸ˜ŠðŸ™ðŸ’•ðŸ˜­ðŸ˜˜ðŸ‘ðŸ˜…ðŸ‘ðŸ˜ðŸ”¥ðŸ¥°ðŸ’”ðŸ’–ðŸ’™ðŸ˜¢ðŸ¤”ðŸ˜†ðŸ™„ðŸ’ªðŸ˜‰â˜ºðŸ‘ŒðŸ¤—ðŸ’œðŸ˜”ðŸ˜ŽðŸ˜‡ðŸŒ¹ðŸ¤¦ðŸŽ‰ðŸ’žâœŒâœ¨ðŸ¤·ðŸ˜±ðŸ˜ŒðŸŒ¸ðŸ™ŒðŸ˜‹ðŸ’—ðŸ’šðŸ˜ðŸ’›ðŸ™‚ðŸ’“ðŸ¤©ðŸ˜„ðŸ˜€ðŸ–¤ðŸ˜ƒðŸ’¯ðŸ™ˆðŸ‘‡ðŸŽ¶ðŸ˜’ðŸ¤­â£ðŸ˜œðŸ’‹ðŸ‘€ðŸ˜ªðŸ˜‘ðŸ’¥ðŸ™‹ðŸ˜žðŸ˜©ðŸ˜¡ðŸ¤ªðŸ‘ŠðŸ¥³ðŸ˜¥ðŸ¤¤ðŸ‘‰ðŸ’ƒðŸ˜³âœ‹ðŸ˜šðŸ˜ðŸ˜´ðŸŒŸðŸ˜¬ðŸ™ƒðŸ€ðŸŒ·ðŸ˜»ðŸ˜“â­âœ…ðŸ¥ºðŸŒˆðŸ˜ˆðŸ¤˜ðŸ’¦âœ”ðŸ˜£ðŸƒðŸ’â˜¹ðŸŽŠðŸ’˜ðŸ˜ â˜ðŸ˜•ðŸŒºðŸŽ‚ðŸŒ»ðŸ˜ðŸ–•ðŸ’ðŸ™ŠðŸ˜¹ðŸ—£ðŸ’«ðŸ’€ðŸ‘‘ðŸŽµðŸ¤žðŸ˜›ðŸ”´ðŸ˜¤ðŸŒ¼ðŸ˜«âš½ðŸ¤™â˜•ðŸ†ðŸ¤«ðŸ‘ˆðŸ˜®ðŸ™†ðŸ»ðŸƒðŸ¶ðŸ’ðŸ˜²ðŸŒ¿ðŸ§¡ðŸŽâš¡ðŸŒžðŸŽˆâŒâœŠðŸ‘‹ðŸ˜°ðŸ¤¨ðŸ˜¶ðŸ¤ðŸš¶ðŸ’°ðŸ“ðŸ’¢ðŸ¤ŸðŸ™ðŸš¨ðŸ’¨ðŸ¤¬âœˆðŸŽ€ðŸºðŸ¤“ðŸ˜™ðŸ’ŸðŸŒ±ðŸ˜–ðŸ‘¶ðŸ¥´â–¶âž¡â“ðŸ’ŽðŸ’¸â¬‡ðŸ˜¨ðŸŒšðŸ¦‹ðŸ˜·ðŸ•ºâš ðŸ™…ðŸ˜ŸðŸ˜µðŸ‘ŽðŸ¤²ðŸ¤ ðŸ¤§ðŸ“ŒðŸ”µðŸ’…ðŸ§ðŸ¾ðŸ’ðŸ˜—ðŸ¤‘ðŸŒŠðŸ¤¯ðŸ·â˜ŽðŸ’§ðŸ˜¯ðŸ’†ðŸ‘†ðŸŽ¤ðŸ™‡ðŸ‘â„ðŸŒ´ðŸ’£ðŸ¸ðŸ’ŒðŸ“ðŸ¥€ðŸ¤¢ðŸ‘…ðŸ’¡ðŸ’©ðŸ‘ðŸ“¸ðŸ‘»ðŸ¤ðŸ¤®ðŸŽ¼ðŸ¥µðŸš©ðŸŽðŸŠðŸ‘¼ðŸ’ðŸ“£ðŸ¥‚"),Ro=hr.reduce((t,e,r)=>(t[r]=e,t),[]),Vo=hr.reduce((t,e,r)=>{const n=e.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${e}`);return t[n]=r,t},[]);function ko(t){return t.reduce((e,r)=>(e+=Ro[r],e),"")}function qo(t){const e=[];for(const r of t){const n=r.codePointAt(0);if(n==null)throw new Error(`Invalid character: ${r}`);const s=Vo[n];if(s==null)throw new Error(`Non-base256emoji character: ${r}`);e.push(s)}return new Uint8Array(e)}const Wo=ze({prefix:"ðŸš€",name:"base256emoji",encode:ko,decode:qo}),Go=Object.freeze(Object.defineProperty({__proto__:null,base256emoji:Wo},Symbol.toStringTag,{value:"Module"})),Jo=M({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Qo=M({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),Xo=M({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),Ko=M({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6}),Zo=Object.freeze(Object.defineProperty({__proto__:null,base64:Jo,base64pad:Qo,base64url:Xo,base64urlpad:Ko},Symbol.toStringTag,{value:"Module"})),Ho=M({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3}),Yo=Object.freeze(Object.defineProperty({__proto__:null,base8:Ho},Symbol.toStringTag,{value:"Module"})),ei=ze({prefix:"\0",name:"identity",encode:t=>Rs(t),decode:t=>js(t)}),ti=Object.freeze(Object.defineProperty({__proto__:null,identity:ei},Symbol.toStringTag,{value:"Module"}));new TextEncoder;new TextDecoder;const It={...ti,...jo,...Yo,...No,...Lo,...oo,...uo,...ao,...Zo,...Go};function ri(t=0){return new Uint8Array(t)}function lr(t,e,r,n){return{name:t,prefix:e,encoder:{name:t,prefix:e,encode:r},decoder:{decode:n}}}const Dt=lr("utf8","u",t=>"u"+new TextDecoder("utf8").decode(t),t=>new TextEncoder().encode(t.substring(1))),Le=lr("ascii","a",t=>{let e="a";for(let r=0;r<t.length;r++)e+=String.fromCharCode(t[r]);return e},t=>{t=t.substring(1);const e=ri(t.length);for(let r=0;r<t.length;r++)e[r]=t.charCodeAt(r);return e}),ni={utf8:Dt,"utf-8":Dt,hex:It.base16,latin1:Le,ascii:Le,binary:Le,...It};function si(t,e="utf8"){const r=ni[e];if(r==null)throw new Error(`Unsupported encoding "${e}"`);return r.encoder.encode(t).substring(1)}const fr=/^https?:\/\/[^/]+\/(ip[fn]s)\/([^/?#]+)/,ae=/^\/(ip[fn]s)\/([^/?#]+)/,pr=1,br=2,Me=/^https?:\/\/([^/]+)\.(ip[fn]s)\.[^/?]+/,wr=1,gr=2,oi=/^(([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])\.)+([a-z0-9]|[a-z0-9][a-z0-9-]*[a-z0-9])$/;function $i(t){const e=dt(t);if(e===!1)return!1;try{dr(B.decode(`z${e}`))}catch{return!1}return!0}function ii(t){try{return!!Ae(t)}catch{return!1}}function ai(t){try{let e;if(Ie(t)?e=E.parse(t):e=E.asCID(t),e==null)return!1;Z.decode(e.toString())}catch{return!1}return!0}function Te(t){try{return Ie(t)?!!E.parse(t):t instanceof Uint8Array?!!E.decode(t):!!E.asCID(t)}catch{return!1}}function vi(t){return ii(t)&&As.matches(t)}function fe(t,e,r=pr,n=br){const s=dt(t);if(s===!1)return!1;const o=s.match(e);if(o==null||o[r]!=="ipfs")return!1;let i=o[n];return i!=null&&e===Me&&(i=i.toLowerCase()),Te(i)}function Oe(t,e,r=pr,n=br){const s=dt(t);if(s===!1)return!1;const o=s.match(e);if(o==null||o[r]!=="ipns")return!1;let i=o[n];if(i!=null&&e===Me){if(i=i.toLowerCase(),Te(i))return!0;try{!i.includes(".")&&i.includes("-")&&(i=i.replace(/--/g,"@").replace(/-/g,".").replace(/@/g,"-"));const{hostname:a}=new Ls.URL(`http://${i}`);return oi.test(a)}catch{return!1}}return!0}function Ie(t){return typeof t=="string"}function dt(t){return t instanceof Uint8Array?si(t,"base58btc"):Ie(t)?t:!1}const yr=t=>fe(t,Me,gr,wr),mr=t=>Oe(t,Me,gr,wr),ci=t=>yr(t)||mr(t),ui=t=>fe(t,fr)||yr(t),di=t=>Oe(t,fr)||mr(t),hi=t=>ui(t)||di(t)||ci(t),li=t=>fe(t,ae)||Oe(t,ae),xi=t=>Te(t)&&ai(t),Si=t=>fe(t,ae),Ei=t=>Oe(t,ae),Ci=t=>hi(t)||li(t),Ai=t=>Ie(t)&&!Te(t)&&fe(`/ipfs/${t}`,ae);export{xi as base32cid,Te as cid,Ai as cidPath,Si as ipfsPath,yr as ipfsSubdomain,ui as ipfsUrl,Ei as ipnsPath,mr as ipnsSubdomain,di as ipnsUrl,ii as multiaddr,$i as multihash,li as path,fr as pathGatewayPattern,ae as pathPattern,vi as peerMultiaddr,ci as subdomain,Me as subdomainGatewayPattern,hi as url,Ci as urlOrPath};
